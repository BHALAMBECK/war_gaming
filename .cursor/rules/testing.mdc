# Testing Standards

## Coverage Requirements
- Minimum 60% coverage for sim math (orbit propagation, vector operations).
- Minimum 60% coverage for serialization (scenario save/load, state persistence).
- Unit tests for all deterministic functions (RNG, integrators, orbital elements).

## Golden Tests for Determinism
- Test that same seed + same scenario produces identical simulation output.
- Store reference outputs in `__snapshots__/` or `test/fixtures/`.
- Use Vitest snapshots for serialized scenario JSON.

## Test Organization
- Unit tests: `*.test.ts` alongside source files.
- Integration tests: `test/integration/` for full scenario runs.
- Mock external dependencies (texture loading, WebGL context if needed).

## Example Golden Test
```typescript
test('deterministic scenario playback', () => {
  const seed = 'test-seed-123';
  const scenario = loadScenario('test-scenario.json');
  
  const run1 = simulate(scenario, seed, 1000);
  const run2 = simulate(scenario, seed, 1000);
  
  expect(run1).toEqual(run2);
});
```

## Performance Tests
- Profile sim step time for 500 and 5,000 agents.
- Ensure sim step completes in <16ms for 500 agents (60 FPS budget).
